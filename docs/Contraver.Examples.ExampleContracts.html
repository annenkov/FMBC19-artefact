<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<link href="coqdoc.css" rel="stylesheet" type="text/css" />
<link href="coqdocjs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="config.js"></script>
<script type="text/javascript" src="coqdocjs.js"></script>
</head>

<body onload="document.getElementById('content').focus()">
  <div id="header">
    <span class="left">
      <span class="modulename"> <script> document.write(document.title) </script> </span>
    </span>

    <span class="button" id="toggle-proofs"></span>

    <span class="right">
      <a href="https://github.com/annenkov/FMBC19-artefact/" target="_balnk">Project Page</a>
    </span>
</div>
    <div id="content" tabindex="-1" onblur="document.getElementById('content').focus()">
    <div id="main">
<h1 class="libtitle">Contraver.Examples.ExampleContracts</h1>

<div class="code">
</div>

<div class="doc">
<a name="lab20"></a><h1 class="section">Examples</h1>

</div>
<div class="code">
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Strings.String.html#"><span class="id" title="library">String</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="Contraver.Polymorphic.Ast.html#"><span class="id" title="library">Polymorphic.Ast</span></a> <a class="idref" href="Contraver.Lib.CustomTactics.html#"><span class="id" title="library">Lib.CustomTactics</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#"><span class="id" title="library">List</span></a>.<br/>
<span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#"><span class="id" title="library">PeanoNat</span></a>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>
<span class="id" title="var">From</span> <span class="id" title="var">Template</span> <span class="id" title="keyword">Require</span> <span class="id" title="keyword">Import</span> <span class="id" title="library">All</span>.<br/>

<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">MonadNotation</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">BaseTypes</span>.<br/>
<span class="id" title="keyword">Import</span> <span class="id" title="var">StdLib</span>.<br/>
<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">list</span>.<br/>

<br/>
</div>

<div class="doc">
Our approximation for finite maps. Eventually, will be replaced with the Oak's standard library implementation. We assume that the standard library is available for a contract developer. 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Section</span> <a name="Maps"><span class="id" title="section">Maps</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="addr_map"><span class="id" title="inductive">addr_map</span></a> : <span class="id" title="keyword">Set</span> :=<br/>
&nbsp;&nbsp;| <a name="mnil"><span class="id" title="constructor">mnil</span></a> | <a name="mcons"><span class="id" title="constructor">mcons</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#addr_map"><span class="id" title="inductive">addr_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#addr_map"><span class="id" title="inductive">addr_map</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Inductive</span> <a name="Maybe_map"><span class="id" title="inductive">Maybe_map</span></a> :=<br/>
&nbsp;&nbsp;| <a name="Just_map"><span class="id" title="constructor">Just_map</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Maybe_map"><span class="id" title="inductive">Maybe_map</span></a> | <a name="Nothing_map"><span class="id" title="constructor">Nothing_map</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="Maybe"><span class="id" title="definition">Maybe</span></a> := "Maybe_map".<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="lookup_map"><span class="id" title="definition">lookup_map</span></a> (<span class="id" title="var">m</span> : <a class="idref" href="Contraver.Examples.ExampleContracts.html#addr_map"><span class="id" title="inductive">addr_map</span></a>) (<span class="id" title="var">key</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) : <a class="idref" href="Contraver.Examples.ExampleContracts.html#Maybe_map"><span class="id" title="inductive">Maybe_map</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Contraver.Examples.ExampleContracts.html#mnil"><span class="id" title="constructor">mnil</span></a> =&gt; <a class="idref" href="Contraver.Examples.ExampleContracts.html#Nothing_map"><span class="id" title="constructor">Nothing_map</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Contraver.Examples.ExampleContracts.html#mcons"><span class="id" title="constructor">mcons</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">m'</span> =&gt;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">if</span> (<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb"><span class="id" title="definition">Nat.eqb</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#key"><span class="id" title="variable">key</span></a> <span class="id" title="var">k</span>) <span class="id" title="keyword">then</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> <span class="id" title="var">v</span> <span class="id" title="keyword">else</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">m'</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#key"><span class="id" title="variable">key</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;Ported&nbsp;from&nbsp;FMapWeaklist&nbsp;of&nbsp;StdLib&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Function</span> <span class="id" title="var">add_map</span> (<span class="id" title="var">k</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">x</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>) (<span class="id" title="var">s</span> : <a class="idref" href="Contraver.Examples.ExampleContracts.html#addr_map"><span class="id" title="inductive">addr_map</span></a>) : <a class="idref" href="Contraver.Examples.ExampleContracts.html#addr_map"><span class="id" title="inductive">addr_map</span></a> :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#s"><span class="id" title="variable">s</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;| <a class="idref" href="Contraver.Examples.ExampleContracts.html#mnil"><span class="id" title="constructor">mnil</span></a> =&gt; <a class="idref" href="Contraver.Examples.ExampleContracts.html#mcons"><span class="id" title="constructor">mcons</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#x"><span class="id" title="variable">x</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#mnil"><span class="id" title="constructor">mnil</span></a><br/>
&nbsp;&nbsp;&nbsp;| <a class="idref" href="Contraver.Examples.ExampleContracts.html#mcons"><span class="id" title="constructor">mcons</span></a> <span class="id" title="var">k'</span> <span class="id" title="var">y</span> <span class="id" title="var">l</span> =&gt; <span class="id" title="keyword">if</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb"><span class="id" title="definition">Nat.eqb</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="var">k'</span> <span class="id" title="keyword">then</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#mcons"><span class="id" title="constructor">mcons</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">l</span> <span class="id" title="keyword">else</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#mcons"><span class="id" title="constructor">mcons</span></a> <span class="id" title="var">k'</span> <span class="id" title="var">y</span> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#x"><span class="id" title="variable">x</span></a> <span class="id" title="var">l</span>)<br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="inmap_map"><span class="id" title="definition">inmap_map</span></a> <span class="id" title="var">k</span> <span class="id" title="var">m</span> := <span class="id" title="keyword">match</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> <span class="id" title="var">_</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;| <span class="id" title="var">Nothing</span> =&gt; <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="lookup_map_add"><span class="id" title="lemma">lookup_map_add</span></a> <span class="id" title="var">k</span> <span class="id" title="var">v</span> <span class="id" title="var">m</span> : <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_refl"><span class="id" title="lemma">PeanoNat.Nat.eqb_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.eqb_refl"><span class="id" title="lemma">PeanoNat.Nat.eqb_refl</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <span class="id" title="var">Heq</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Maps"><span class="id" title="section">Maps</span></a>.<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="b018a66e1e5f3a3e69df51e53be82ded"><span class="id" title="notation">&quot;</span></a>a ∈ m" := (<a class="idref" href="Contraver.Examples.ExampleContracts.html#inmap_map"><span class="id" title="definition">inmap_map</span></a> <span class="id" title="var">a</span> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>
<span class="id" title="keyword">Notation</span> <a name="d92418d8275ab059111c0bf2db0bfc36"><span class="id" title="notation">&quot;</span></a>a ∉ m" := (<a class="idref" href="Contraver.Examples.ExampleContracts.html#inmap_map"><span class="id" title="definition">inmap_map</span></a> <span class="id" title="var">a</span> <span class="id" title="var">m</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a>) (<span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 50).<br/>

<br/>
</div>

<div class="doc">
Generation of string constants using MetaCoq 
</div>
<div class="code">
<span class="id" title="keyword">Fixpoint</span> <a name="mkNames"><span class="id" title="definition">mkNames</span></a> (<span class="id" title="var">ns</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#list"><span class="id" title="inductive">list</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) (<span class="id" title="var">postfix</span> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Strings.String.html#string"><span class="id" title="inductive">string</span></a>) :=<br/>
&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#ns"><span class="id" title="variable">ns</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;| <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a> =&gt; <span class="id" title="constructor">tmPrint</span> "Done."<br/>
&nbsp;&nbsp;| <span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#cbcf67aac0c2a85b8d93d37de9969adf"><span class="id" title="notation">::</span></a> <span class="id" title="var">ns'</span> =&gt; <span class="id" title="var">n'</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="constructor">tmEval</span> <span class="id" title="constructor">all</span> (<span class="id" title="var">n</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Strings.String.html#169ad156fbc6036a53a0338819a2b301"><span class="id" title="notation">++</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#postfix"><span class="id" title="variable">postfix</span></a>)%<span class="id" title="var">string</span> <span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">str</span> <span class="id" title="notation">&lt;-</span> <span class="id" title="constructor">tmQuote</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#n'"><span class="id" title="variable">n'</span></a><span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="constructor">tmMkDefinition</span> <span class="id" title="var">n</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#str"><span class="id" title="variable">str</span></a><span class="id" title="notation">;;</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#mkNames"><span class="id" title="definition">mkNames</span></a> <span class="id" title="var">ns'</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#postfix"><span class="id" title="variable">postfix</span></a><br/>
&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
</div>

<div class="doc">
Notations for functions on finite maps 
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Definition</span> <a name="Map"><span class="id" title="definition">Map</span></a> := "addr_map".<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="2dc17329f6d37374bf507ef8f6d1c00a"><span class="id" title="notation">&quot;</span></a>'mfind' a b" :=  <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> "lookup_map"<a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">b</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="76042c6abc02481617998af324e3835e"><span class="id" title="notation">&quot;</span></a>'madd' a b c" :=  <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> "add_map"<a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">b</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">c</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">c</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>

<br/>
<span class="id" title="keyword">Notation</span> <a name="bd07eab0c08cca91dc1ddea219575f73"><span class="id" title="notation">&quot;</span></a>'mem' a b" :=  <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> "inmap_map"<a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">b</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>

<br/>
</div>

<div class="doc">
<a name="lab21"></a><h1 class="section">Contract execution context</h1>

<div class="paragraph"> </div>

 The contract execution context is a part of the blockchain infrastructure, not specific to this particular example. We assume that these structures reflect the actual implementation.  
</div>
<div class="code">

<br/>
<span class="id" title="keyword">Record</span> <a name="ctx"><span class="id" title="record">ctx</span></a> := <a name="mkctx"><span class="id" title="constructor">mkctx</span></a> { <a name="_ctx_from"><span class="id" title="projection">_ctx_from</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="_ctx_contract_address"><span class="id" title="projection">_ctx_contract_address</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a> ;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="_amount"><span class="id" title="projection">_amount</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>;<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a name="_cur_time"><span class="id" title="projection">_cur_time</span></a> : <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a>}.<br/>

<br/>
<span class="id" title="keyword">Definition</span> <a name="ctx_from_name"><span class="id" title="definition">ctx_from_name</span></a> := "ExampleContracts._ctx_from".<br/>
<span class="id" title="keyword">Definition</span> <a name="Ctx"><span class="id" title="definition">Ctx</span></a> := "ExampleContracts.ctx".<br/>
<span class="id" title="keyword">Notation</span> <a name="d215d8a386abbd35dcea5acbd54844af"><span class="id" title="notation">&quot;</span></a>'ctx_from' a" := <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#ctx_from_name"><span class="id" title="definition">ctx_from_name</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a name="3ed22355efb87b1d36d20bfe112e1248"><span class="id" title="notation">&quot;</span></a>'ctx_contract_address' a" :=<br/>
&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> "ExampleContracts._ctx_contract_address"<a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a name="ff55da3db2a2ec1775d1a81cf88759d5"><span class="id" title="notation">&quot;</span></a>'amount' a" := <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> "_amount"<a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
<span class="id" title="keyword">Notation</span> <a name="1698e35472a8c11b875479a79a15d4c8"><span class="id" title="notation">&quot;</span></a>'cur_time' a" := <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> "_cur_time"<a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
</div>

<div class="doc">
<a name="lab22"></a><h2 class="section">The crowdfunding contract</h2>

</div>
<div class="code">

<br/>
<span class="id" title="keyword">Module</span> <a name="CrowdfundingContract"><span class="id" title="module">CrowdfundingContract</span></a>.<br/>

<br/>
</div>

<div class="doc">
Note that we define the deep embedding (abstract syntax trees) of the data structures and programs using notations. These notations are defined in  <span class="inlinecode"><span class="id" title="var">Ast.v</span></span> and make use of the "custom entries" feature. The idea is that the corresponding ASTs will be produced from the real Oak programs by means of printing the fully annotated abstract syntax trees build from constructors of the inductive type <span class="inlinecode"><span class="id" title="var">Ast.expr</span></span> 
<div class="paragraph"> </div>

 Brackets like <span class="inlinecode">\</span> <span class="inlinecode">\</span> delimit the scope of global definitions and like <span class="inlinecode">|</span> <span class="inlinecode">|</span> the scope of programs 
<div class="paragraph"> </div>

 We model types of addresses and currency by <span class="inlinecode"><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nat"><span class="id" title="inductive">nat</span></a></span> type of Coq 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="CrowdfundingContract.Address"><span class="id" title="abbreviation">Address</span></a> := <a class="idref" href="Contraver.Polymorphic.Ast.html#BaseTypes.Nat"><span class="id" title="definition">Nat</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.Money"><span class="id" title="definition">Money</span></a> := <a class="idref" href="Contraver.Polymorphic.Ast.html#BaseTypes.Nat"><span class="id" title="definition">Nat</span></a>.<br/>

<br/>
</div>

<div class="doc">
Generating names for the data structures  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">Run</span> <span class="id" title="var">TemplateProgram</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Contraver.Examples.ExampleContracts.html#mkNames"><span class="id" title="definition">mkNames</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a>"State" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "balance" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "donations" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "owner"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "deadline"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "goal"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Result" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Res" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Error"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Msg"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Donate"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "GetFunds"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Claim"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"Action"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Transfer"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "Empty" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> "_coq").<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">ListNotations</span>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab23"></a><h3 class="section">Definitions of data structures for the contract</h3>

<div class="paragraph"> </div>

 The internal state of the contract 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.state_syn"><span class="id" title="definition">state_syn</span></a> : <a class="idref" href="Contraver.Polymorphic.Ast.html#global_dec"><span class="id" title="inductive">global_dec</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">[\</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">record</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State"><span class="id" title="definition">State</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">{</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.balance"><span class="id" title="definition">balance</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Money"><span class="id" title="definition">Money</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations"><span class="id" title="definition">donations</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Map"><span class="id" title="definition">Map</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.owner"><span class="id" title="definition">owner</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Money"><span class="id" title="definition">Money</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline"><span class="id" title="definition">deadline</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#BaseTypes.Nat"><span class="id" title="definition">Nat</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.goal"><span class="id" title="definition">goal</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Money"><span class="id" title="definition">Money</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#0b8ddc84c970e6f195ca94cee0cdaf9a"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">\]</span></a>.<br/>

<br/>
</div>

<div class="doc">
We can print actual AST by switching off the notations 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Unset</span> <span class="id" title="keyword">Printing</span> <span class="id" title="var">Notations</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Print</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.state_syn"><span class="id" title="definition">state_syn</span></a>.<br/>
&nbsp;&nbsp;<span class="comment">(*&nbsp;state_syn&nbsp;=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;gdInd&nbsp;State&nbsp;O<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(rec_constr&nbsp;State<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(pair&nbsp;(nNamed&nbsp;balance)&nbsp;(tyInd&nbsp;Money))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(pair&nbsp;(nNamed&nbsp;donations)&nbsp;(tyInd&nbsp;Map))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(pair&nbsp;(nNamed&nbsp;owner)&nbsp;(tyInd&nbsp;Money))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(pair&nbsp;(nNamed&nbsp;deadline)&nbsp;(tyInd&nbsp;Nat))<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(cons&nbsp;(pair&nbsp;(nNamed&nbsp;goal)&nbsp;(tyInd&nbsp;Money))&nbsp;nil))))))&nbsp;nil)&nbsp;true<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;:&nbsp;global_dec&nbsp;*)</span><br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Set</span> <span class="id" title="keyword">Printing</span> <span class="id" title="var">Notations</span>.<br/>

<br/>
</div>

<div class="doc">
Unquoting the definition of a record 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="var">Make</span> <span class="id" title="keyword">Inductive</span> (<a class="idref" href="Contraver.Polymorphic.Ast.html#trans_global_dec"><span class="id" title="definition">trans_global_dec</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.state_syn"><span class="id" title="definition">state_syn</span></a>).<br/>

<br/>
</div>

<div class="doc">
As a result, we get a new Coq record <span class="inlinecode"><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a></span> 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Print</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>.<br/>

<br/>
</div>

<div class="doc">
AST of action that our contract can produce 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.action_syn"><span class="id" title="definition">action_syn</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">[\</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">data</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Action"><span class="id" title="definition">Action</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Transfer"><span class="id" title="definition">Transfer</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#763b6a0c5188a7866e0ea5a0f81570d0"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Address"><span class="id" title="abbreviation">Address</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#26b5b7884c8556dc1a44ae242fcf1a6d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Money"><span class="id" title="definition">Money</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#26b5b7884c8556dc1a44ae242fcf1a6d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Action"><span class="id" title="definition">Action</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Empty"><span class="id" title="definition">Empty</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#763b6a0c5188a7866e0ea5a0f81570d0"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Action"><span class="id" title="definition">Action</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">\]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Make</span> <span class="id" title="keyword">Inductive</span> (<a class="idref" href="Contraver.Polymorphic.Ast.html#trans_global_dec"><span class="id" title="definition">trans_global_dec</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.action_syn"><span class="id" title="definition">action_syn</span></a>).<br/>

<br/>
</div>

<div class="doc">
AST for the type of results 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.result_syn"><span class="id" title="definition">result_syn</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">[\</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">data</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Res"><span class="id" title="definition">Res</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#763b6a0c5188a7866e0ea5a0f81570d0"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State"><span class="id" title="definition">State</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#26b5b7884c8556dc1a44ae242fcf1a6d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Action"><span class="id" title="definition">Action</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#26b5b7884c8556dc1a44ae242fcf1a6d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Error"><span class="id" title="definition">Error</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#763b6a0c5188a7866e0ea5a0f81570d0"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#b921becddda18f5f0859266a564cbc5a"><span class="id" title="notation">;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">\]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Make</span> <span class="id" title="keyword">Inductive</span> (<a class="idref" href="Contraver.Polymorphic.Ast.html#trans_global_dec"><span class="id" title="definition">trans_global_dec</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.result_syn"><span class="id" title="definition">result_syn</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.msg_syn"><span class="id" title="definition">msg_syn</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">[\</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#b0c6ddb041e01fae91d0169dfd21d556"><span class="id" title="notation">data</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Msg"><span class="id" title="definition">Msg</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#b0c6ddb041e01fae91d0169dfd21d556"><span class="id" title="notation">:=</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Donate"><span class="id" title="definition">Donate</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#763b6a0c5188a7866e0ea5a0f81570d0"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Msg"><span class="id" title="definition">Msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#b0c6ddb041e01fae91d0169dfd21d556"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.GetFunds"><span class="id" title="definition">GetFunds</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#763b6a0c5188a7866e0ea5a0f81570d0"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Msg"><span class="id" title="definition">Msg</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#b0c6ddb041e01fae91d0169dfd21d556"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Claim"><span class="id" title="definition">Claim</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#763b6a0c5188a7866e0ea5a0f81570d0"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Msg"><span class="id" title="definition">Msg</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#b0c6ddb041e01fae91d0169dfd21d556"><span class="id" title="notation">;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#fe8473dd9402cdf9a6648d9eb80cf296"><span class="id" title="notation">\]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Make</span> <span class="id" title="keyword">Inductive</span> (<a class="idref" href="Contraver.Polymorphic.Ast.html#trans_global_dec"><span class="id" title="definition">trans_global_dec</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.msg_syn"><span class="id" title="definition">msg_syn</span></a>).<br/>

<br/>
</div>

<div class="doc">
Custom notations for patterns, projections and constructors 
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Module</span> <a name="CrowdfundingContract.Notations"><span class="id" title="module">Notations</span></a>.<br/>

<br/>
</div>

<div class="doc">
Patterns 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="83a3a53021596ef8d587088fbe582420"><span class="id" title="notation">&quot;</span></a>'Donate'" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Contraver.Polymorphic.Ast.html#pConstr"><span class="id" title="constructor">pConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Donate"><span class="id" title="definition">Donate</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">pat</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="0678c712d3c1f725ce905716964d87b4"><span class="id" title="notation">&quot;</span></a>'GetFunds'" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Contraver.Polymorphic.Ast.html#pConstr"><span class="id" title="constructor">pConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.GetFunds"><span class="id" title="definition">GetFunds</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) ( <span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">pat</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="7675658bd97857b67d70d30d4c14c049"><span class="id" title="notation">&quot;</span></a>'Claim'" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Contraver.Polymorphic.Ast.html#pConstr"><span class="id" title="constructor">pConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Claim"><span class="id" title="definition">Claim</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>) ( <span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">pat</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="f4178cac07e4bf8b43b0bc5a2d679fd2"><span class="id" title="notation">&quot;</span></a>'Just' x" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Contraver.Polymorphic.Ast.html#pConstr"><span class="id" title="constructor">pConstr</span></a> "Just" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><span class="id" title="var">x</span><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a>) (<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">pat</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">x</span> <span class="id" title="keyword">constr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 4).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="0369f7979c63c774c43435a08071f5a7"><span class="id" title="notation">&quot;</span></a>'Nothing'" := (<a class="idref" href="Contraver.Polymorphic.Ast.html#pConstr"><span class="id" title="constructor">pConstr</span></a> "Nothing" <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">pat</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
</div>

<div class="doc">
Projections 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="277011594073685d60461f54923bd198"><span class="id" title="notation">&quot;</span></a>'balance' a" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.balance"><span class="id" title="definition">balance</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="3f2253de6ff28fe732749ef41239b4c7"><span class="id" title="notation">&quot;</span></a>'donations' a" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations"><span class="id" title="definition">donations</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="b5abd169d9e7503acca1c04953017bb5"><span class="id" title="notation">&quot;</span></a>'owner' a" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.owner"><span class="id" title="definition">owner</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">&quot;</span></a>'deadline' a" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline"><span class="id" title="definition">deadline</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="fe86a72478b6831dae24c3a540f15ebf"><span class="id" title="notation">&quot;</span></a>'goal' a" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConst"><span class="id" title="constructor">eConst</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.goal"><span class="id" title="definition">goal</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
</div>

<div class="doc">
Constructors 
</div>
<div class="code">
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="5420274e731e18b10ff57cfd3a25c0aa"><span class="id" title="notation">&quot;</span></a>'Res' a b" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Res"><span class="id" title="definition">Res</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">b</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="3a357d9379fc17fb9b5d2dffa864db0d"><span class="id" title="notation">&quot;</span></a>'Error'" := (<a class="idref" href="Contraver.Polymorphic.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Error"><span class="id" title="definition">Error</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="03d085a9db7bcc815298632fe78b697f"><span class="id" title="notation">&quot;</span></a>'mkState' a b" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State"><span class="id" title="definition">State</span></a> "mkState_coq"<a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">b</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="da99d75fd29bb0024053dc52ba895210"><span class="id" title="notation">&quot;</span></a>'Transfer' a b" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Action"><span class="id" title="definition">Action</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Transfer"><span class="id" title="definition">Transfer</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">a</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">{</span></a><span class="id" title="var">b</span><a class="idref" href="Contraver.Polymorphic.Ast.html#9bb18901484762033c8f1fa6120fb5d4"><span class="id" title="notation">}</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">a</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 1).<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="b69aeb167fa0d96ebaafd637c057e9c4"><span class="id" title="notation">&quot;</span></a>'Empty'" := (<a class="idref" href="Contraver.Polymorphic.Ast.html#eConstr"><span class="id" title="constructor">eConstr</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Action"><span class="id" title="definition">Action</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Empty"><span class="id" title="definition">Empty</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 0).<br/>

<br/>
</div>

<div class="doc">
New global context with the constants defined above (in addition to the ones defined in the Oak's "StdLib") 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="fcb5140804486395debb3496d98a6f26"><span class="id" title="definition">Σ'</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#47d0d78d4d530216364af042577b7f7e"><span class="id" title="definition">Σ</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#bc347c51eaf667706ae54503b26d52c6"><span class="id" title="notation">++</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#gdInd"><span class="id" title="constructor">gdInd</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Ctx"><span class="id" title="definition">Ctx</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"ExampleContracts.mkctx"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="constructor">nAnon</span><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#tyInd"><span class="id" title="constructor">tyInd</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Address"><span class="id" title="abbreviation">Address</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="constructor">nAnon</span><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#tyInd"><span class="id" title="constructor">tyInd</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Address"><span class="id" title="abbreviation">Address</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#gdInd"><span class="id" title="constructor">gdInd</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Maybe"><span class="id" title="definition">Maybe</span></a> 0 <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"Just"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><span class="id" title="constructor">nAnon</span><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#tyInd"><span class="id" title="constructor">tyInd</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#BaseTypes.Nat"><span class="id" title="definition">Nat</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ddd65c2f7ee73ecec433744948d846bb"><span class="id" title="notation">]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a>"Nothing"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.state_syn"><span class="id" title="definition">state_syn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.result_syn"><span class="id" title="definition">result_syn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.msg_syn"><span class="id" title="definition">msg_syn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.action_syn"><span class="id" title="definition">action_syn</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>.<br/>

<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">End</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Notations"><span class="id" title="module">Notations</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">Notations</span>.<br/>

<br/>
</div>

<div class="doc">
Generating string constants for varable names 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="var">Run</span> <span class="id" title="var">TemplateProgram</span> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#mkNames"><span class="id" title="definition">mkNames</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a>"c"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a>"s"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a>"e"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a>"m"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a>"v"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"tx_amount"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "bal"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "sender"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "own"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"accs"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "now"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"newstate"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "newmap"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a> "cond"<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a> "").<br/>
</div>

<div class="doc">
A shortcut for <span class="inlinecode"><span class="id" title="keyword">if</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="keyword">then</span></span> <span class="inlinecode">..</span> <span class="inlinecode"><span class="id" title="keyword">else</span></span> <span class="inlinecode">..</span>  
</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Notation</span> <a name="0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">&quot;</span></a>'if' cond 'then' b1 'else' b2 : ty" :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<a class="idref" href="Contraver.Polymorphic.Ast.html#eCase"><span class="id" title="constructor">eCase</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#tyInd"><span class="id" title="constructor">tyInd</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#BaseTypes.Bool"><span class="id" title="definition">Bool</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a>0<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a> (<a class="idref" href="Contraver.Polymorphic.Ast.html#tyInd"><span class="id" title="constructor">tyInd</span></a> <span class="id" title="var">ty</span>) <span class="id" title="var">cond</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">[</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#pConstr"><span class="id" title="constructor">pConstr</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#StdLib.true_name"><span class="id" title="definition">true_name</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b1</span><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">;</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#pConstr"><span class="id" title="constructor">pConstr</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#StdLib.false_name"><span class="id" title="definition">false_name</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#ae9a5e1034e143b218b09d8e454472bd"><span class="id" title="notation">[]</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">,</span></a><span class="id" title="var">b2</span><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#e6756e10c36f149b18b4a8741ed83079"><span class="id" title="notation">)</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Lists.List.html#e76c6291366b599375c28eba0aae94bb"><span class="id" title="notation">]</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="tactic">in</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 2,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">cond</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 4,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">ty</span> <span class="id" title="keyword">constr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 4,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b1</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 4,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">b2</span> <span class="id" title="var">custom</span> <span class="id" title="var">expr</span> <span class="id" title="tactic">at</span> <span class="id" title="keyword">level</span> 4).<br/>

<br/>
</div>

<div class="doc">
<a name="lab24"></a><h3 class="section">The AST of a crowdfunding contract</h3>

</div>
<div class="code">
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.crowdfunding"><span class="id" title="definition">crowdfunding</span></a> : <a class="idref" href="Contraver.Polymorphic.Ast.html#expr"><span class="id" title="inductive">expr</span></a> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">[|</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">\</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.c"><span class="id" title="definition">c</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Ctx"><span class="id" title="definition">Ctx</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">=&gt;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">\</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State"><span class="id" title="definition">State</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">=&gt;</span></a>  <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">\</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.m"><span class="id" title="definition">m</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Msg"><span class="id" title="definition">Msg</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5a67c20fae665de9355aa131b6b33c35"><span class="id" title="notation">=&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Money"><span class="id" title="definition">Money</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#277011594073685d60461f54923bd198"><span class="id" title="notation">balance</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.now"><span class="id" title="definition">now</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#BaseTypes.Nat"><span class="id" title="definition">Nat</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#1698e35472a8c11b875479a79a15d4c8"><span class="id" title="notation">cur_time</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.c"><span class="id" title="definition">c</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.tx_amount"><span class="id" title="definition">tx_amount</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Money"><span class="id" title="definition">Money</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#ff55da3db2a2ec1775d1a81cf88759d5"><span class="id" title="notation">amount</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.c"><span class="id" title="definition">c</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Address"><span class="id" title="abbreviation">Address</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#d215d8a386abbd35dcea5acbd54844af"><span class="id" title="notation">ctx_from</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.c"><span class="id" title="definition">c</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.own"><span class="id" title="definition">own</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Address"><span class="id" title="abbreviation">Address</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#b5abd169d9e7503acca1c04953017bb5"><span class="id" title="notation">owner</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.accs"><span class="id" title="definition">accs</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Map"><span class="id" title="definition">Map</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#3f2253de6ff28fe732749ef41239b4c7"><span class="id" title="notation">donations</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">case</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.m"><span class="id" title="definition">m</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Msg"><span class="id" title="definition">Msg</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">return</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">of</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0678c712d3c1f725ce905716964d87b4"><span class="id" title="notation">GetFunds</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">if</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.own"><span class="id" title="definition">own</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#2265258c1c3b2569a5ebdf76ad03fd7c"><span class="id" title="notation">==</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#ac9af04ec505d6dfd59dc74e57339e88"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">deadline</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#2ba2c6136748cb5f7261a535c9a52398"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.now"><span class="id" title="definition">now</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#ac9af04ec505d6dfd59dc74e57339e88"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#fe86a72478b6831dae24c3a540f15ebf"><span class="id" title="notation">goal</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#52615a9e77e9770ecfdbea95cbfbae9d"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.bal"><span class="id" title="definition">bal</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a>  <a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#5420274e731e18b10ff57cfd3a25c0aa"><span class="id" title="notation">Res</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#03d085a9db7bcc815298632fe78b697f"><span class="id" title="notation">mkState</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5046f6c0f247f0f8385647f5ff8d60b0"><span class="id" title="notation">0</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.accs"><span class="id" title="definition">accs</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.own"><span class="id" title="definition">own</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">deadline</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#fe86a72478b6831dae24c3a540f15ebf"><span class="id" title="notation">goal</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">))</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#da99d75fd29bb0024053dc52ba895210"><span class="id" title="notation">Transfer</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">else</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#3a357d9379fc17fb9b5d2dffa864db0d"><span class="id" title="notation">Error</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#83a3a53021596ef8d587088fbe582420"><span class="id" title="notation">Donate</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">if</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.now"><span class="id" title="definition">now</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#52615a9e77e9770ecfdbea95cbfbae9d"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">deadline</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">case</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#2dc17329f6d37374bf507ef8f6d1c00a"><span class="id" title="notation">mfind</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.accs"><span class="id" title="definition">accs</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Maybe"><span class="id" title="definition">Maybe</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">return</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">of</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#f4178cac07e4bf8b43b0bc5a2d679fd2"><span class="id" title="notation">Just</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.v"><span class="id" title="definition">v</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.newmap"><span class="id" title="definition">newmap</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Map"><span class="id" title="definition">Map</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#76042c6abc02481617998af324e3835e"><span class="id" title="notation">madd</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.v"><span class="id" title="definition">v</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#e81fdcd41964c44957fc7d64a4b3194b"><span class="id" title="notation">+</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.tx_amount"><span class="id" title="definition">tx_amount</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.accs"><span class="id" title="definition">accs</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#5420274e731e18b10ff57cfd3a25c0aa"><span class="id" title="notation">Res</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#03d085a9db7bcc815298632fe78b697f"><span class="id" title="notation">mkState</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.tx_amount"><span class="id" title="definition">tx_amount</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#e81fdcd41964c44957fc7d64a4b3194b"><span class="id" title="notation">+</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.bal"><span class="id" title="definition">bal</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.newmap"><span class="id" title="definition">newmap</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.own"><span class="id" title="definition">own</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">deadline</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#fe86a72478b6831dae24c3a540f15ebf"><span class="id" title="notation">goal</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">))</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#b69aeb167fa0d96ebaafd637c057e9c4"><span class="id" title="notation">Empty</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0369f7979c63c774c43435a08071f5a7"><span class="id" title="notation">Nothing</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.newmap"><span class="id" title="definition">newmap</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Map"><span class="id" title="definition">Map</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#76042c6abc02481617998af324e3835e"><span class="id" title="notation">madd</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.tx_amount"><span class="id" title="definition">tx_amount</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.accs"><span class="id" title="definition">accs</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#5420274e731e18b10ff57cfd3a25c0aa"><span class="id" title="notation">Res</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#03d085a9db7bcc815298632fe78b697f"><span class="id" title="notation">mkState</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.tx_amount"><span class="id" title="definition">tx_amount</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#e81fdcd41964c44957fc7d64a4b3194b"><span class="id" title="notation">+</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.bal"><span class="id" title="definition">bal</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.newmap"><span class="id" title="definition">newmap</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.own"><span class="id" title="definition">own</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">deadline</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#fe86a72478b6831dae24c3a540f15ebf"><span class="id" title="notation">goal</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">))</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#b69aeb167fa0d96ebaafd637c057e9c4"><span class="id" title="notation">Empty</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">else</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#3a357d9379fc17fb9b5d2dffa864db0d"><span class="id" title="notation">Error</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#7675658bd97857b67d70d30d4c14c049"><span class="id" title="notation">Claim</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#1e49904dc3eaf74de09823d1b3774fd3"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">if</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">deadline</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#2ba2c6136748cb5f7261a535c9a52398"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.now"><span class="id" title="definition">now</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#ac9af04ec505d6dfd59dc74e57339e88"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.bal"><span class="id" title="definition">bal</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#2ba2c6136748cb5f7261a535c9a52398"><span class="id" title="notation">&lt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#fe86a72478b6831dae24c3a540f15ebf"><span class="id" title="notation">goal</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">then</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">case</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#2dc17329f6d37374bf507ef8f6d1c00a"><span class="id" title="notation">mfind</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.accs"><span class="id" title="definition">accs</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Maybe"><span class="id" title="definition">Maybe</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">return</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">of</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#f4178cac07e4bf8b43b0bc5a2d679fd2"><span class="id" title="notation">Just</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.v"><span class="id" title="definition">v</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">let</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.newmap"><span class="id" title="definition">newmap</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Map"><span class="id" title="definition">Map</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">:=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#76042c6abc02481617998af324e3835e"><span class="id" title="notation">madd</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#5046f6c0f247f0f8385647f5ff8d60b0"><span class="id" title="notation">0</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.accs"><span class="id" title="definition">accs</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#74f539375d746a26697c81469507f22f"><span class="id" title="notation">in</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#5420274e731e18b10ff57cfd3a25c0aa"><span class="id" title="notation">Res</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#03d085a9db7bcc815298632fe78b697f"><span class="id" title="notation">mkState</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.bal"><span class="id" title="definition">bal</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#646e55b0c46a0c0090350f1f75f7da3c"><span class="id" title="notation">-</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.v"><span class="id" title="definition">v</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.newmap"><span class="id" title="definition">newmap</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.own"><span class="id" title="definition">own</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#9009daab0c4c0e02514c241a219f81e2"><span class="id" title="notation">deadline</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#fe86a72478b6831dae24c3a540f15ebf"><span class="id" title="notation">goal</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.s"><span class="id" title="definition">s</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">))</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">(</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#da99d75fd29bb0024053dc52ba895210"><span class="id" title="notation">Transfer</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.v"><span class="id" title="definition">v</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sender"><span class="id" title="definition">sender</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">|</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0369f7979c63c774c43435a08071f5a7"><span class="id" title="notation">Nothing</span></a> <a class="idref" href="Contraver.Polymorphic.Ast.html#decaa3b9884dd31ec0b158d946c8e148"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#3a357d9379fc17fb9b5d2dffa864db0d"><span class="id" title="notation">Error</span></a><a class="idref" href="Contraver.Polymorphic.Ast.html#d8c7a17158b575954bc29fcd16b46d59"><span class="id" title="notation">)</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">else</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#3a357d9379fc17fb9b5d2dffa864db0d"><span class="id" title="notation">Error</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#0e30f5091486eaa875a8d33019f3b0aa"><span class="id" title="notation">:</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Result"><span class="id" title="definition">Result</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Polymorphic.Ast.html#143c2b826a30d37e0d680ea16616e805"><span class="id" title="notation">|]</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="var">Make</span> <span class="id" title="keyword">Definition</span> <span class="id" title="var">entry</span> :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">Eval</span> <span class="id" title="tactic">compute</span> <span class="id" title="tactic">in</span> (<a class="idref" href="Contraver.Polymorphic.Ast.html#expr_to_term"><span class="id" title="definition">expr_to_term</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#3c3c43185682007105928b00c28fd117"><span class="id" title="definition">Σ'</span></a> (<a class="idref" href="Contraver.Polymorphic.Ast.html#indexify"><span class="id" title="definition">indexify</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#nil"><span class="id" title="constructor">nil</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.crowdfunding"><span class="id" title="definition">crowdfunding</span></a>)).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">inv_andb</span> <span class="id" title="var">H</span> := <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a> <span class="id" title="tactic">in</span> <span class="id" title="var">H</span>;<span class="id" title="tactic">destruct</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Ltac</span> <span class="id" title="var">split_andb</span> := <span class="id" title="tactic">apply</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Bool.Bool.html#andb_true_iff"><span class="id" title="lemma">Bool.andb_true_iff</span></a>;<span class="id" title="tactic">split</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">nat</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Open</span> <span class="id" title="keyword">Scope</span> <span class="id" title="var">bool</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="var">now</span> (<span class="id" title="var">s</span> : <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>) := <a class="idref" href="Contraver.Examples.ExampleContracts.html#s"><span class="id" title="variable">s</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_coq"><span class="id" title="projection">deadline_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#now"><span class="id" title="variable">now</span></a>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.goal_reached"><span class="id" title="definition">goal_reached</span></a> (<span class="id" title="var">s</span> : <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>) := <a class="idref" href="Contraver.Examples.ExampleContracts.html#s"><span class="id" title="variable">s</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.goal_coq"><span class="id" title="projection">goal_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#s"><span class="id" title="variable">s</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.balance_coq"><span class="id" title="projection">balance_coq</span></a>).<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Definition</span> <a name="CrowdfundingContract.funded"><span class="id" title="definition">funded</span></a> <span class="id" title="var">now</span> (<span class="id" title="var">s</span> : <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#now"><span class="id" title="variable">now</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#s"><span class="id" title="variable">s</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.goal_reached"><span class="id" title="definition">goal_reached</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#s"><span class="id" title="variable">s</span></a>.<br/>

<br/>
</div>

<div class="doc">
<a name="lab25"></a><h2 class="section">Properties of the crowdfunding contract</h2>

<div class="paragraph"> </div>

 The donations can be paid back to the backers if the goal is not
reached within a deadline 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CrowdfundingContract.get_money_back_guarantee"><span class="id" title="lemma">get_money_back_guarantee</span></a> (<span class="id" title="var">init_state</span> <span class="id" title="var">final_state</span>: <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CallCtx</span>  <span class="id" title="var">msg</span> <span class="id" title="var">sender</span> <span class="id" title="var">out_tx</span> <span class="id" title="var">v</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pre-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_ctx_from"><span class="id" title="projection">_ctx_from</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Claim_coq"><span class="id" title="constructor">Claim_coq</span></a> <span class="comment">(*&nbsp;a&nbsp;sender&nbsp;claims&nbsp;the&nbsp;money*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.funded"><span class="id" title="definition">funded</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_cur_time"><span class="id" title="projection">_cur_time</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a> <span class="comment">(*&nbsp;the&nbsp;sender&nbsp;donated&nbsp;<span class="inlinecode"><span class="id" title="var">v</span></span>&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.entry"><span class="id" title="definition">entry</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Res_coq"><span class="id" title="constructor">Res_coq</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;post-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Transfer_coq"><span class="id" title="constructor">Transfer_coq</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <span class="comment">(*&nbsp;the&nbsp;money&nbsp;are&nbsp;sent&nbsp;back&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> 0. <span class="comment">(*&nbsp;balance&nbsp;of&nbsp;the&nbsp;sender&nbsp;put&nbsp;to&nbsp;zero&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsender</span> <span class="id" title="var">Hmsg</span> <span class="id" title="var">Hfunded</span> <span class="id" title="var">Hlook</span> <span class="id" title="var">Hcall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="var">inv_andb</span> <span class="id" title="var">Hfunded</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;direct&nbsp;rewriting&nbsp;with&nbsp;<span class="inlinecode"><span class="id" title="var">Hlook</span></span>&nbsp;or&nbsp;<span class="inlinecode"><span class="id" title="var">Hgoal</span></span>&nbsp;cannot&nbsp;unify&nbsp;terms<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;in&nbsp;Hcall&nbsp;for&nbsp;some&nbsp;reason,&nbsp;but&nbsp;destruct&nbsp;with&nbsp;underscores&nbsp;works&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#9ddeac0ab66152bd1d64bedb507a795e"><span class="id" title="notation">&amp;&amp;</span></a> <span class="id" title="var">_</span>)%<span class="id" title="var">bool</span>;<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>; <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hlook</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map_add"><span class="id" title="lemma">lookup_map_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
New donations are recorded correctly in the contract's state 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CrowdfundingContract.new_donation_correct"><span class="id" title="lemma">new_donation_correct</span></a> (<span class="id" title="var">init_state</span> <span class="id" title="var">final_state</span>: <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CallCtx</span>  <span class="id" title="var">msg</span> <span class="id" title="var">sender</span> <span class="id" title="var">out_tx</span> <span class="id" title="var">donation</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pre-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_ctx_from"><span class="id" title="projection">_ctx_from</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Donate_coq"><span class="id" title="constructor">Donate_coq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_amount"><span class="id" title="projection">_amount</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#donation"><span class="id" title="variable">donation</span></a>  <span class="comment">(*&nbsp;a&nbsp;sender&nbsp;donates&nbsp;<span class="inlinecode"><span class="id" title="var">donation</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#d92418d8275ab059111c0bf2db0bfc36"><span class="id" title="notation">∉</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <span class="comment">(*&nbsp;the&nbsp;sender&nbsp;have&nbsp;not&nbsp;donated&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_cur_time"><span class="id" title="projection">_cur_time</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_coq"><span class="id" title="projection">deadline_coq</span></a>) <span class="comment">(*&nbsp;deadline&nbsp;have&nbsp;not&nbsp;passed&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.entry"><span class="id" title="definition">entry</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Res_coq"><span class="id" title="constructor">Res_coq</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;post-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Empty_coq"><span class="id" title="constructor">Empty_coq</span></a> <span class="comment">(*&nbsp;nothing&nbsp;gets&nbsp;transferred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#donation"><span class="id" title="variable">donation</span></a>. <span class="comment">(*&nbsp;donation&nbsp;has&nbsp;been&nbsp;accepted&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsender</span> <span class="id" title="var">Hmsg</span> <span class="id" title="var">Hamount</span> <span class="id" title="var">Hnew_sender</span> <span class="id" title="var">Hdl</span> <span class="id" title="var">Hcall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#inmap_map"><span class="id" title="definition">inmap_map</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcall</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hcall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map_add"><span class="id" title="lemma">lookup_map_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
Existing donations are updated correctly in the contract's state 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CrowdfundingContract.existing_donation_correct"><span class="id" title="lemma">existing_donation_correct</span></a> (<span class="id" title="var">init_state</span> <span class="id" title="var">final_state</span>: <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CallCtx</span>  <span class="id" title="var">msg</span> <span class="id" title="var">sender</span> <span class="id" title="var">out_tx</span> <span class="id" title="var">old_don</span> <span class="id" title="var">new_don</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pre-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_ctx_from"><span class="id" title="projection">_ctx_from</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Donate_coq"><span class="id" title="constructor">Donate_coq</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_amount"><span class="id" title="projection">_amount</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#new_don"><span class="id" title="variable">new_don</span></a>  <span class="comment">(*&nbsp;a&nbsp;sender&nbsp;donates&nbsp;<span class="inlinecode"><span class="id" title="var">new_don</span></span>&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#old_don"><span class="id" title="variable">old_don</span></a> <span class="comment">(*&nbsp;the&nbsp;sender&nbsp;has&nbsp;already&nbsp;donated&nbsp;before&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_cur_time"><span class="id" title="projection">_cur_time</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Peano.html#cb53cf0ee22c036a03b4a9281c68b5a3"><span class="id" title="notation">&lt;=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_coq"><span class="id" title="projection">deadline_coq</span></a>) <span class="comment">(*&nbsp;deadline&nbsp;have&nbsp;not&nbsp;passed&nbsp;*)</span><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.entry"><span class="id" title="definition">entry</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Res_coq"><span class="id" title="constructor">Res_coq</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;post-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Empty_coq"><span class="id" title="constructor">Empty_coq</span></a> <span class="comment">(*&nbsp;nothing&nbsp;gets&nbsp;transferred&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#sender"><span class="id" title="variable">sender</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#new_don"><span class="id" title="variable">new_don</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#old_don"><span class="id" title="variable">old_don</span></a>). <span class="comment">(*&nbsp;donation&nbsp;has&nbsp;been&nbsp;added&nbsp;*)</span><br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hsender</span> <span class="id" title="var">Hmsg</span> <span class="id" title="var">Hamount</span> <span class="id" title="var">Hold</span> <span class="id" title="var">Hdl</span> <span class="id" title="var">Hcall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> &lt;- <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#Nat.leb_le"><span class="id" title="lemma">Nat.leb_le</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcall</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hcall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">split</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hold</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">rewrite</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map_add"><span class="id" title="lemma">lookup_map_add</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Import</span> <span class="id" title="var">Lia</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Fixpoint</span> <a name="CrowdfundingContract.sum_map"><span class="id" title="definition">sum_map</span></a>  (<span class="id" title="var">m</span> : <a class="idref" href="Contraver.Examples.ExampleContracts.html#addr_map"><span class="id" title="inductive">addr_map</span></a>) :=<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">match</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a> <span class="id" title="keyword">with</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Contraver.Examples.ExampleContracts.html#mnil"><span class="id" title="constructor">mnil</span></a> =&gt; 0<br/>
&nbsp;&nbsp;&nbsp;&nbsp;| <a class="idref" href="Contraver.Examples.ExampleContracts.html#mcons"><span class="id" title="constructor">mcons</span></a> <span class="id" title="var">_</span> <span class="id" title="var">v</span> <span class="id" title="var">m'</span> =&gt; <span class="id" title="var">v</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#sum_map"><span class="id" title="definition">sum_map</span></a> <span class="id" title="var">m'</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="keyword">end</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CrowdfundingContract.sum_map_add_in"><span class="id" title="lemma">sum_map_add_in</span></a> <span class="id" title="var">m</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">n0</span> <span class="id" title="var">v'</span> <span class="id" title="var">v</span> <span class="id" title="var">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Just_map"><span class="id" title="constructor">Just_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#n0"><span class="id" title="variable">n0</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map"><span class="id" title="definition">sum_map</span></a> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#n0"><span class="id" title="variable">n0</span></a><a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a><a class="idref" href="Contraver.Examples.ExampleContracts.html#v'"><span class="id" title="variable">v'</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">n0</span>. <span class="id" title="var">revert</span> <span class="id" title="var">v'</span> <span class="id" title="var">k</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>. <span class="id" title="tactic">subst</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CrowdfundingContract.sum_map_add_not_in"><span class="id" title="lemma">sum_map_add_not_in</span></a> <span class="id" title="var">m</span> : <span class="id" title="keyword">forall</span> <span class="id" title="var">v'</span> <span class="id" title="var">v</span> <span class="id" title="var">k</span>,<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#Nothing_map"><span class="id" title="constructor">Nothing_map</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map"><span class="id" title="definition">sum_map</span></a> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#add_map"><span class="id" title="definition">add_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#k"><span class="id" title="variable">k</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#m"><span class="id" title="variable">m</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v'"><span class="id" title="variable">v'</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Peano.html#0dacc1786c5ba797d47dd85006231633"><span class="id" title="notation">+</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#v"><span class="id" title="variable">v</span></a>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">revert</span> <span class="id" title="tactic">dependent</span> <span class="id" title="var">k</span>. <span class="id" title="var">revert</span> <span class="id" title="var">v'</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">induction</span> <span class="id" title="var">m</span>;<span class="id" title="tactic">intros</span>;<span class="id" title="tactic">subst</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">reflexivity</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">k</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">n</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hkn</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">H</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">rewrite</span> <span class="id" title="var">IHm</span>;<span class="id" title="tactic">auto</span>. <span class="id" title="var">lia</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The contract does no leak funds: the oveall balance before the deadline is always equal to the sum of individual donations 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CrowdfundingContract.contract_baked"><span class="id" title="lemma">contract_baked</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;(<span class="id" title="var">init_state</span> <span class="id" title="var">final_state</span>: <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>)<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">CallCtx</span> <span class="id" title="var">msg</span> <span class="id" title="var">out_tx</span> :<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pre-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_cur_time"><span class="id" title="projection">_cur_time</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#false"><span class="id" title="constructor">false</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.balance_coq"><span class="id" title="projection">balance_coq</span></a>)<br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.entry"><span class="id" title="definition">entry</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Res_coq"><span class="id" title="constructor">Res_coq</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;post-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a>  <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map"><span class="id" title="definition">sum_map</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.donations_coq"><span class="id" title="projection">donations_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.balance_coq"><span class="id" title="projection">balance_coq</span></a>).<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hdl</span> <span class="id" title="var">Hsum</span> <span class="id" title="var">Hcall</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> <span class="id" title="var">msg</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Donate&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">unfold</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<a class="idref" href="Contraver.Examples.ExampleContracts.html#lookup_map"><span class="id" title="definition">lookup_map</span></a> <span class="id" title="var">_</span> <span class="id" title="var">_</span>) <span class="id" title="var">eqn</span>:<span class="id" title="var">Hlook</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcall</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">simpl</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map_add_in"><span class="id" title="lemma">sum_map_add_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;* <span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcall</span>;<span class="id" title="tactic">subst</span>;<span class="id" title="tactic">clear</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">simpl</span>. <span class="id" title="var">now</span> <span class="id" title="tactic">apply</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.sum_map_add_not_in"><span class="id" title="lemma">sum_map_add_not_in</span></a>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;GetFunds&nbsp;-&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;get&nbsp;funds&nbsp;before&nbsp;the&nbsp;deadline&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">unfold</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> ( <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;+ <span class="comment">(*&nbsp;Claim&nbsp;-&nbsp;it&nbsp;is&nbsp;not&nbsp;possible&nbsp;to&nbsp;claim&nbsp;a&nbsp;donation&nbsp;back&nbsp;before&nbsp;the&nbsp;deadline&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">unfold</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
</div>

<div class="doc">
The owner gets the money after the deadline, if the goal is reached 
</div>
<div class="code">

<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Lemma</span> <a name="CrowdfundingContract.GetFunds_correct"><span class="id" title="lemma">GetFunds_correct</span></a> (<span class="id" title="var">init_state</span> <span class="id" title="var">final_state</span>: <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.State_coq"><span class="id" title="record">State_coq</span></a>) <span class="id" title="var">CallCtx</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="var">msg</span> <span class="id" title="var">out_tx</span> <span class="id" title="var">OwnerAddr</span>:<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_ctx_from"><span class="id" title="projection">_ctx_from</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#OwnerAddr"><span class="id" title="variable">OwnerAddr</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;pre-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.funded"><span class="id" title="definition">funded</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#_cur_time"><span class="id" title="projection">_cur_time</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Datatypes.html#true"><span class="id" title="constructor">true</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.GetFunds_coq"><span class="id" title="constructor">GetFunds_coq</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.entry"><span class="id" title="definition">entry</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CallCtx"><span class="id" title="variable">CallCtx</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#msg"><span class="id" title="variable">msg</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Res_coq"><span class="id" title="constructor">Res_coq</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#1c93e43e07fbeaeb6a625cb6614beb5d"><span class="id" title="notation">-&gt;</span></a><br/>
<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="comment">(*&nbsp;post-condition&nbsp;*)</span><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#out_tx"><span class="id" title="variable">out_tx</span></a> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.Transfer_coq"><span class="id" title="constructor">Transfer_coq</span></a> <a class="idref" href="Contraver.Examples.ExampleContracts.html#init_state"><span class="id" title="variable">init_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.balance_coq"><span class="id" title="projection">balance_coq</span></a>) <a class="idref" href="Contraver.Examples.ExampleContracts.html#OwnerAddr"><span class="id" title="variable">OwnerAddr</span></a> <span class="comment">(*&nbsp;the&nbsp;money&nbsp;are&nbsp;sent&nbsp;back&nbsp;*)</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#ba2b0e492d2b4675a0acf3ea92aabadd"><span class="id" title="notation">/\</span></a><br/>
&nbsp;&nbsp;&nbsp;&nbsp;<a class="idref" href="Contraver.Examples.ExampleContracts.html#final_state"><span class="id" title="variable">final_state</span></a>.(<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.balance_coq"><span class="id" title="projection">balance_coq</span></a>) <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Init.Logic.html#6cd0f7b28b6092304087c7049437bb1a"><span class="id" title="notation">=</span></a> 0.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Proof</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">intros</span> <span class="id" title="var">Hown</span> <span class="id" title="var">Hfund</span> <span class="id" title="var">Hmsg</span> <span class="id" title="var">Hcall</span>. <span class="id" title="tactic">unfold</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.funded"><span class="id" title="definition">funded</span></a>,<a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract.deadline_passed"><span class="id" title="definition">deadline_passed</span></a> <span class="id" title="tactic">in</span> *. <span class="id" title="tactic">subst</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#6b7621b45fff0af5e2b2cbb2bc2d4e1d"><span class="id" title="notation">&lt;?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">destruct</span> ( <span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#ad2ec4e405f68c46c0a176e3e94ae2e3"><span class="id" title="notation">=?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>. <span class="id" title="tactic">simpl</span> <span class="id" title="tactic">in</span> *.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">destruct</span> (<span class="id" title="var">_</span> <a class="idref" href="http://coq.inria.fr/distrib/V8.10+alpha/stdlib//Coq.Arith.PeanoNat.html#0f31f5c1c6b6a21a3a187247222bc9e4"><span class="id" title="notation">&lt;=?</span></a> <span class="id" title="var">_</span>);<span class="id" title="var">tryfalse</span>.<br/>
&nbsp;&nbsp;&nbsp;&nbsp;<span class="id" title="tactic">inversion</span> <span class="id" title="var">Hcall</span>. <span class="id" title="var">easy</span>.<br/>
&nbsp;&nbsp;<span class="id" title="keyword">Qed</span>.<br/>

<br/>
<span class="id" title="keyword">End</span> <a class="idref" href="Contraver.Examples.ExampleContracts.html#CrowdfundingContract"><span class="id" title="module">CrowdfundingContract</span></a>.<br/>
</div>
</div>
<div id="footer">
  Generated by <a href="http://coq.inria.fr/">coqdoc</a> and improved with <a href="https://github.com/tebbi/coqdocjs">CoqdocJS</a>
</div>
</div>
</body>

</html>
